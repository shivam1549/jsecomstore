<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <!-- <h1>Hello, world!</h1> -->

    <div class="container p-4">
        <h3 class="mb-2">Products</h3>

        <div class="row">
            <div class="col-md-2">
                <div class="filters" id="filtercontainer">

                </div>
            </div>
            <div class="col-md-10">
                <div class="row" id="productContainer">

                </div>
            </div>
        </div>


    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

<script>
    const productarray = [
        {
            "id": 1,
            "title": "Black Men T Shirts",
            "Price": 400,
            "Description": "Black Men T Shirts",
            "longdescription": "lorem ipsum",
            "image": "https://static.aceomni.cmsaceturtle.com/prod/product-image/aceomni/Wrangler/Monobrand/WMSH003708/WMSH003708_1.jpg",
            "galleryimages": ["https://static.aceomni.cmsaceturtle.com/prod/product-image/aceomni/Wrangler/Myntra/WMSH004571/WMSH004571_1.jpg", "https://static.aceomni.cmsaceturtle.com/prod/product-image/aceomni/Wrangler/Myntra/WMSH004572/WMSH004572_1.jpg"],
            "category": ["clothing", "men"],
            "attributes": {
                "color": ["red", "black", "blue"],
                "size": ["S", "M", "XL"]
            },
            "variations": [
                {
                    "color": "red",
                    "size": "S",
                    "price": 40
                },
                {
                    "color": "red",
                    "size": "M",
                    "price": 50
                },
                {
                    "color": "red",
                    "size": "XL",
                    "price": 60
                },
                {
                    "color": "black",
                    "size": "S",
                    "price": 45
                },
                {
                    "color": "black",
                    "size": "M",
                    "price": 55
                },
                {
                    "color": "black",
                    "size": "XL",
                    "price": 65
                },
                {
                    "color": "blue",
                    "size": "S",
                    "price": 50
                },
                {
                    "color": "blue",
                    "size": "M",
                    "price": 60
                },
                {
                    "color": "blue",
                    "size": "XL",
                    "price": 70
                }
            ]
        },
        {
            "id": 2,
            "title": "Running Shoes",
            "Price": 800,
            "Description": "Comfortable running shoes",
            "longdescription": "lorem ipsum",
            "image": "https://example.com/images/shoes1.jpg",
            "galleryimages": '',
            "category": ["footwear", "unisex"],
            "attributes": {
                "color": ["white", "black", "green"],
                "size": ["7", "8", "9", "10"]
            },
            "variations": [
                {
                    "color": "white",
                    "size": "7",
                    "price": 100
                },
                {
                    "color": "white",
                    "size": "8",
                    "price": 110
                },
                {
                    "color": "white",
                    "size": "9",
                    "price": 120
                },
                {
                    "color": "white",
                    "size": "10",
                    "price": 130
                },
                {
                    "color": "black",
                    "size": "7",
                    "price": 105
                },
                {
                    "color": "black",
                    "size": "8",
                    "price": 115
                },
                {
                    "color": "black",
                    "size": "9",
                    "price": 125
                },
                {
                    "color": "black",
                    "size": "10",
                    "price": 135
                },
                {
                    "color": "green",
                    "size": "7",
                    "price": 110
                },
                {
                    "color": "green",
                    "size": "8",
                    "price": 120
                },
                {
                    "color": "green",
                    "size": "9",
                    "price": 130
                },
                {
                    "color": "green",
                    "size": "10",
                    "price": 140
                }
            ]
        },
        {
            "id": 3,
            "title": "Slim Fit Jeans",
            "Price": 600,
            "Description": "Stylish slim fit jeans",
            "longdescription": "lorem ipsum",
            "image": "https://example.com/images/jeans1.jpg",
            "galleryimages": '',
            "category": ["clothing", "men"],
            "attributes": {
                "color": ["blue", "black"],
                "size": ["30", "32", "34", "36"]
            },
            "variations": [
                {
                    "color": "blue",
                    "size": "30",
                    "price": 60
                },
                {
                    "color": "blue",
                    "size": "32",
                    "price": 65
                },
                {
                    "color": "blue",
                    "size": "34",
                    "price": 70
                },
                {
                    "color": "blue",
                    "size": "36",
                    "price": 75
                },
                {
                    "color": "black",
                    "size": "30",
                    "price": 65
                },
                {
                    "color": "black",
                    "size": "32",
                    "price": 70
                },
                {
                    "color": "black",
                    "size": "34",
                    "price": 75
                },
                {
                    "color": "black",
                    "size": "36",
                    "price": 80
                }
            ]
        },
        {
            "id": 4,
            "title": "Casual Sneakers",
            "Price": 500,
            "Description": "Trendy casual sneakers",
            "longdescription": "lorem ipsum",
            "image": "https://example.com/images/sneakers1.jpg",
            "galleryimages": '',
            "category": ["footwear", "unisex"],
            "attributes": {
                "color": ["red", "white", "black"],
                "size": ["6", "7", "8", "9"]
            },
            "variations": [
                {
                    "color": "red",
                    "size": "6",
                    "price": 55
                },
                {
                    "color": "red",
                    "size": "7",
                    "price": 60
                },
                {
                    "color": "red",
                    "size": "8",
                    "price": 65
                },
                {
                    "color": "red",
                    "size": "9",
                    "price": 70
                },
                {
                    "color": "white",
                    "size": "6",
                    "price": 60
                },
                {
                    "color": "white",
                    "size": "7",
                    "price": 65
                },
                {
                    "color": "white",
                    "size": "8",
                    "price": 70
                },
                {
                    "color": "white",
                    "size": "9",
                    "price": 75
                },
                {
                    "color": "black",
                    "size": "6",
                    "price": 65
                },
                {
                    "color": "black",
                    "size": "7",
                    "price": 70
                },
                {
                    "color": "black",
                    "size": "8",
                    "price": 75
                },
                {
                    "color": "black",
                    "size": "9",
                    "price": 80
                }
            ]
        },
        {
            "id": 5,
            "title": "Denim Jacket",
            "Price": 1000,
            "Description": "Stylish denim jacket",
            "longdescription": "lorem ipsum",
            "image": "https://example.com/images/jacket1.jpg",
            "galleryimages": '',
            "category": ["clothing", "men"],
            "attributes": {
                "color": ["blue", "black"],
                "size": ["M", "L", "XL"]
            },
            "variations": [
                {
                    "color": "blue",
                    "size": "M",
                    "price": 150
                },
                {
                    "color": "blue",
                    "size": "L",
                    "price": 160
                },
                {
                    "color": "blue",
                    "size": "XL",
                    "price": 170
                },
                {
                    "color": "black",
                    "size": "M",
                    "price": 160
                },
                {
                    "color": "black",
                    "size": "L",
                    "price": 170
                },
                {
                    "color": "black",
                    "size": "XL",
                    "price": 180
                }
            ]
        }
    ];

    var html = '';
    var filters = '';
    var uniquqattributes = {};
    productarray.map(item => {
        html += `<div class="col-md-3 mb-2">
            <div class="card">
                <div class="card-body">
                    <div class="swipercontainerwrap">
                    <img class="w-100 swipesimg" src="${item.image}">`;
        if (item.galleryimages) {
            item.galleryimages.map(img => {
                html += ` <img class="w-100  swipesimg" src="${img}">`;
            })
        }
        html += `</div><h5>${item.title}</h5>`;
        Object.entries(item.attributes).map(([key, values]) => {
            const attributestore = item.attributes;

            for (const key in attributestore) {
                if (!uniquqattributes[key]) {
                    uniquqattributes[key] = new Set();
                }
                attributestore[key].forEach(value => uniquqattributes[key].add(value));
            }





            if (key === "color") {
                html += `<div class="d-flex" style="gap:2px">`
                // console.log(typeof(key))
                values.forEach(element => {
                    // console.log(element)

                    html += ` <span title="${element}" style="background-color: ${element}; width:10px; height:10px; display: inline-flex; border:1px solid #000;"></span><br>`

                });

                html += `</div>`
            }
            else {

                html += ` <span>${key}: ${values.join(', ')}</span><br>`
            }



        })

        html += `  </div>
                </div>
            </div>
        `;
    });

    document.querySelector("#productContainer").innerHTML = html;
    document.querySelector("#filtercontainer").innerHTML = filters;


    const slideshowContainer = document.querySelector('.swipercontainerwrap');

    function showSlides() {
        console.log("first")
        const slides = slideshowContainer.querySelectorAll('.swipesimg');
        let currentSlideIndex = 0;

        slides.forEach(slide => {
            slide.style.display = 'none';
        });

        slides[currentSlideIndex].style.display = 'block';

        setInterval(() => {
            slides[currentSlideIndex].style.display = 'none';
            currentSlideIndex = (currentSlideIndex + 1) % slides.length;
            slides[currentSlideIndex].style.display = 'block';
        }, 2000); // 2 seconds interval
    }

    showSlides();

    // console.log(uniquqattributes)

    for (const key in uniquqattributes) {
        filters += `<p>${key}</p>`;

        Array.from(uniquqattributes[key]).forEach(vals => {
            filters += `<input type="checkbox" class="filters" value="${vals}"><label>${vals}</label><br>`;
        })

    }

    document.querySelector("#filtercontainer").innerHTML = filters;

    var filters = document.querySelectorAll(".filters");
    var filterVals = {};
    Array.from(filters).forEach(function (filter) {
        filter.addEventListener("click", function () {
            // Your event handler logic here
            if(this.checked){
                // console.log(this.value)
                filterVals.push(this.value);
                console.log(filterVals)
                showFilteredproducts(filterVals)
            }

        });
    });

    function showFilteredproducts(filterVals){
        productarray.map(item => {
            
        })
    }



</script>

</html>